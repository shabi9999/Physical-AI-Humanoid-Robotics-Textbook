# Implementation Plan: Module 4 — Vision-Language-Action (VLA) Pipeline

**Branch**: `004-vla-pipeline` | **Date**: 2025-12-08 | **Spec**: [specs/004-vla-pipeline/spec.md](spec.md)

**Note**: This plan is generated by the `/sp.plan` workflow and defines the research, design, and architecture for Module 4 content creation.

## Summary

Module 4 teaches the complete Vision-Language-Action (VLA) pipeline: how humanoid robots convert voice input into natural language understanding, plan semantic actions, and execute them through ROS 2 Action Servers. The technical approach follows a four-chapter structure: Speech Recognition (Whisper) → LLM Planning → ROS 2 Actions → Complete VLA Integration, with each chapter independently testable and aligned with OpenAI Whisper, LLM APIs, and ROS 2 official documentation.

## Technical Context

**Language/Version**: Markdown (Docusaurus + MDX compatible)

**Primary Dependencies**:
- Docusaurus 2.x (static site generation)
- Mermaid (diagrams and workflows)
- React (interactive components)
- OpenAI API (for future RAG chatbot integration)

**Storage**: N/A (content-only module; no runtime storage)

**Testing**: Content validation (clarity, accuracy, consistency, navigation, RAG compatibility)

**Target Platform**: Web (Docusaurus-deployed to GitHub Pages)

**Project Type**: Documentation/Educational content (web)

**Performance Goals**:
- Fast page loads (<2s for typical 5000-word chapter)
- Responsive design for mobile/tablet learners
- Accessible to beginner learners (Flesch-Kincaid grade 10-12)

**Constraints**:
- No implementation code (Python, C++, YAML)
- Beginner-friendly language (no assumptions of advanced ML/robotics knowledge)
- 100% alignment with OpenAI Whisper, GPT/LLM APIs, and ROS 2 Action Server documentation
- Docusaurus-compatible Markdown with proper heading hierarchy
- Textual/ASCII descriptions only (no embedded images for content portability)

**Scale/Scope**:
- 4 chapters (Whisper, LLM Planning, ROS 2 Actions, Complete VLA)
- ~5,000 words per chapter (20,000 total)
- 3-5 conceptual diagrams per chapter (textual descriptions or Mermaid)
- Cross-linking to Module 1 (ROS 2) and Module 3 (perception/VSLAM/Nav2)

## Constitution Check

**GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.**

**Constitution v1.0.0 Alignment Check**:

| Principle | Status | Evidence |
|-----------|--------|----------|
| **Spec-driven development** | ✅ PASS | Complete specification with 4 user stories, 23 requirements, 8 success criteria |
| **Accurate, reproducible, runnable code** | ✅ PASS | Content is conceptual; no code required. All technical claims reference OpenAI Whisper, LLM, ROS 2 docs (reproducible, verifiable) |
| **Clarity for beginner–intermediate AI/robotics learners** | ✅ PASS | SC-002: Written for beginner-to-intermediate learners; no assumptions of advanced ML/robotics knowledge |
| **Modular intelligence via Claude Code Subagents & Skills** | ✅ PASS | Each of 4 chapters independently testable (U1-U4); can be developed/reviewed separately |
| **Docusaurus book standards** | ✅ PASS | 1 of 15+ chapters; includes concepts, diagrams, labs section; deployable to GitHub Pages |
| **RAG Chatbot standards** | ✅ PASS | Content will be chunked (512 ± 100 tokens per spec), indexed for semantic search, with citations |
| **VLA + ROS 2 + NVIDIA Isaac** | ✅ PASS | Spec explicitly covers Whisper, LLM planning, ROS 2 Actions; integrates with Module 1 and Module 3 |

**GATE RESULT**: ✅ **PASS** — Project aligns with all constitution principles. Ready for Phase 0 research.

## Project Structure

### Documentation (this feature)

```text
specs/004-vla-pipeline/
├── plan.md                    # This file (/sp.plan command output)
├── spec.md                    # Feature specification (4 user stories, 23 requirements)
├── research.md                # Phase 0 output (GENERATED in this workflow)
├── data-model.md              # Phase 1 output (content metadata & structure)
├── quickstart.md              # Phase 1 output (learning path & chapter navigation)
├── contracts/
│   └── chapter-structure.md   # Acceptance criteria for each chapter
└── tasks.md                   # Phase 2 output (/sp.tasks command - NOT created by /sp.plan)
```

### Docusaurus Content Structure (my-website/)

```text
my-website/docs/module4/
├── intro.md                   # Chapter 0: Introduction to Module 4
├── chapter1-whisper.md        # Chapter 1: Speech Recognition with Whisper (U1)
├── chapter2-llm-planning.md   # Chapter 2: LLM Cognitive Planning (U2)
├── chapter3-ros2-actions.md   # Chapter 3: ROS 2 Action Integration (U3)
└── chapter4-complete-vla.md   # Chapter 4: Complete VLA Pipeline (U4)

my-website/docusaurus.config.js  # Updated sidebar.ts entries for module4
my-website/sidebars.js           # Add module4 chapters to sidebar navigation
```

**Structure Decision**:
- **Docusaurus Location**: Content lives in `my-website/docs/module4/` alongside Module 1 and Module 3
- **Sidebar Integration**: `sidebars.js` will include module4 sections under the main navigation
- **Cross-linking**: Each chapter includes links back to relevant Module 1 content (nodes, pub/sub, rclpy) and Module 3 content (perception, VSLAM, Nav2)
- **Naming Convention**: `chapterN-topic.md` (matches Module 1 and Module 3 pattern)
- **Metadata**: Each chapter includes YAML frontmatter with learning objectives, prerequisites, and estimated reading time
- **Chunk Size**: Content split into 512 ± 100 token chunks for RAG indexing (follows constitution standards)

## Implementation Phases

### Phase 0: Research (1-2 days)
**Deliverable**: research.md

**Activities**:
1. Verify OpenAI Whisper documentation and capabilities
2. Verify LLM/GPT API documentation and prompting best practices
3. Verify ROS 2 Action Server documentation and lifecycle
4. Map Module 1 concepts (nodes, pub/sub, services) to VLA integration points
5. Map Module 3 concepts (perception, VSLAM, Nav2) to VLA feedback loops
6. Identify diagram patterns for 5 diagram types (Architecture, Workflow, Tables, Trees, Narrative)
7. Verify 12 VLA terminology definitions against official sources
8. Identify real-world humanoid robot scenarios (manipulation, navigation, interaction)

**Gate Criteria**:
- ✅ All OpenAI/ROS 2 documentation sources verified
- ✅ 3-5 cross-linking references identified per chapter
- ✅ Diagram strategy specified with examples
- ✅ All 12 VLA terms verified and sourced

### Phase 1: Design (2-3 days)
**Deliverables**: data-model.md, quickstart.md, contracts/chapter-structure.md

**Activities**:
1. Define YAML frontmatter schema (14 fields)
2. Define chapter section structure (5 sections per chapter)
3. Define word allocation per chapter and section
4. Define metadata schema for RAG chunks (chapter, section, keywords, objectives, related chapters)
5. Design section boundary guidelines for RAG compatibility
6. Design URL structure pattern for cross-linking
7. Create chapter structure contracts (5 AC per chapter × 4 chapters = 20 ACs)
8. Design learning path and navigation guide (quickstart.md)

**Gate Criteria**:
- ✅ YAML schema complete with 14 required fields
- ✅ Section structure defined (5 sections per chapter)
- ✅ Word allocation: ~5,000 per chapter (20,000 total)
- ✅ 20 acceptance criteria mapped to 4 user stories
- ✅ Cross-linking strategy: 3-5 Module 1/3 references per chapter
- ✅ RAG metadata schema defined (chunk boundaries, keywords, learning objectives)

### Phase 2: Implementation (4-5 days)
**Deliverable**: tasks.md (generated by `/sp.tasks` command, NOT in this plan)

**Activities**:
1. Create intro chapter (Chapter 0): Module 4 overview and learning path
2. Write Chapter 1 (Whisper): Speech recognition workflow, architecture, real-world scenarios, limitations
3. Write Chapter 2 (LLM Planning): Intent extraction, semantic understanding, prompting strategy, entity recognition
4. Write Chapter 3 (ROS 2 Actions): Action lifecycle, trajectory planning, feedback mechanisms, integration
5. Write Chapter 4 (Complete VLA): End-to-end pipeline, perception feedback, error handling, humanoid robot scenarios
6. Create Mermaid diagrams for each chapter (3-5 per chapter)
7. Create ASCII workflow descriptions
8. Add cross-links to Module 1 and Module 3
9. Verify Flesch-Kincaid readability (10-12) for all chapters
10. Validate RAG chunking (512 ± 100 tokens, 20% overlap)

**Gate Criteria**:
- ✅ All 4 chapters written (~5,000 words each)
- ✅ 20 acceptance criteria verified
- ✅ All diagrams created (3-5 per chapter)
- ✅ 3-5 cross-links per chapter to Module 1/3
- ✅ Flesch-Kincaid 10-12 readability verified
- ✅ RAG chunking metadata complete

### Phase 3: Deployment (1-2 days)
**Activities**:
1. Integrate chapters into Docusaurus (my-website/docs/module4/)
2. Update sidebar navigation (sidebars.js)
3. Deploy to GitHub Pages
4. Verify Docusaurus rendering (headings, links, formatting)
5. Verify cross-links work correctly
6. Generate RAG chunks and test semantic search

**Gate Criteria**:
- ✅ All chapters deployed and visible in Docusaurus
- ✅ Navigation working correctly
- ✅ Cross-links functional
- ✅ RAG chatbot can index and search content

## Key Design Decisions & Rationale

### 1. Four-Chapter Structure (Voice → Language → Action → Integration)
- **Rationale**: Mirrors natural data flow in VLA pipeline; each chapter builds on previous one
- **Trade-off**: Potential repetition of concepts (mitigated by explicit connections and section previews)
- **Reversibility**: Can be reordered or combined if learning outcomes suggest different structure

### 2. Beginner-Friendly Language, No ML Mathematics
- **Rationale**: Constitution principle "clarity for beginner–intermediate learners"; VLA concepts can be understood at system level without math
- **Trade-off**: May frustrate advanced readers; solved with "next steps" pointers to advanced resources
- **Reversibility**: Can add "advanced deep-dive" optional sections if needed

### 3. Cross-Linking to Module 1 (ROS 2) and Module 3 (Perception)
- **Rationale**: VLA integrates with existing modules; readers need context of how systems work together
- **Trade-off**: Requires Module 1 completion; mitigated by brief prerequisite reviews in quickstart.md
- **Reversibility**: Can stand alone with minimal updates if Module 1 no longer required

### 4. RAG Chunking Strategy (512 ± 100 tokens, 20% overlap)
- **Rationale**: Constitution standard for RAG compatibility; balances context preservation with searchability
- **Trade-off**: Section boundaries may not align perfectly with chunk boundaries; solved by preferring section ends for splits
- **Reversibility**: Can adjust chunk size if RAG performance warrants

### 5. 12 VLA Terminology (Glossary-Driven)
- **Rationale**: Consistency across chapters prevents confusion; enables RAG search on key concepts
- **Trade-off**: May feel restrictive for creative writing; mitigated by synonyms and cross-references
- **Reversibility**: Can expand glossary if new terms required

## Cross-Linking Strategy

### Module 1 References (ROS 2 Fundamentals)
**Chapter 1 (Whisper)**: 3-5 references to Module 1 Chapter 1 (nodes concept for voice input nodes)

**Chapter 2 (LLM Planning)**: 4-5 references to Module 1 Chapter 2 (Python agents making decisions via ROS 2)

**Chapter 3 (ROS 2 Actions)**: 5-7 references to Module 1 Chapter 1 (pub/sub, services) and explicit ROS 2 Action Server details

**Chapter 4 (Complete VLA)**: 5-6 references to all Module 1 chapters showing how systems integrate

### Module 3 References (Perception/VSLAM/Nav2)
**Chapter 1 (Whisper)**: Optional: 1-2 references to Module 3 Chapter 1 (Isaac Sim for audio simulation)

**Chapter 2 (LLM Planning)**: 2-3 references to Module 3 Chapter 3 (VSLAM providing robot localization context for plans)

**Chapter 3 (ROS 2 Actions)**: 3-4 references to Module 3 Chapter 4 (Nav2 path planning, obstacle avoidance)

**Chapter 4 (Complete VLA)**: 5-6 references to Module 3 showing perception feedback loop (VSLAM + Nav2 inform LLM planning)

## Diagram Strategy

### Diagram Types (Mermaid + ASCII)
1. **Type A - Architecture Diagrams**: System components and data flow
2. **Type B - Workflow Diagrams**: Step-by-step processes
3. **Type C - Tables**: Comparison and reference data
4. **Type D - Trees**: Hierarchical structures and decision paths
5. **Type E - Narrative Diagrams**: Conceptual flows with text descriptions

See research.md for detailed examples of each type.

## Readability & Accessibility

**Target**: Flesch-Kincaid Grade 10-12

**Strategies**:
- Sentence length: 12-15 words average
- Paragraph length: 100-300 words
- Technical terms: Defined on first use with hyperlinks to glossary
- Acronyms: Spelled out on first use (e.g., "VLA (Vision-Language-Action)")
- Examples: Concrete humanoid robot scenarios (picking up objects, navigating buildings, responding to commands)

## Quality Checklist

- [ ] All 4 chapters written with consistent structure
- [ ] 20 acceptance criteria verified
- [ ] 12 VLA terms used consistently
- [ ] 3-5 cross-links per chapter to Module 1/3
- [ ] 3-5 diagrams per chapter (all 5 types represented)
- [ ] Flesch-Kincaid 10-12 readability
- [ ] RAG chunking metadata complete (512 ± 100 tokens, 20% overlap)
- [ ] YAML frontmatter schema complete (14 fields)
- [ ] Docusaurus integration ready
- [ ] URLs follow pattern: /docs/module4/chapter-name#section-slug

---

**Created**: 2025-12-08 | **Feature**: 004-vla-pipeline | **Branch**: 004-vla-pipeline

**Template Version**: Spec-Kit Plus | **Status**: Plan Phase Complete
