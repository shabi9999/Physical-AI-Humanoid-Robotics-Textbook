"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[7168],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var t=s(6540);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}},9206:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"setup/setup-cloud","title":"Cloud-Native Development Setup","description":"Set up Docker, Kubernetes, and cloud deployment","source":"@site/docs/setup/setup-cloud.md","sourceDirName":"setup","slug":"/setup/setup-cloud","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/setup/setup-cloud","draft":false,"unlisted":false,"editUrl":"https://github.com/shabi9999/Physical-AI-Humanoid-Robotics-Textbook/tree/main/my-website/docs/setup/setup-cloud.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"id":"setup-cloud","title":"Cloud-Native Development Setup","description":"Set up Docker, Kubernetes, and cloud deployment"},"sidebar":"docs","previous":{"title":"Physical AI Edge Kit Setup","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/setup/setup-edge-kit"},"next":{"title":"Module 1: ROS 2 Fundamentals for Humanoid Robotics","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module1/intro"}}');var i=s(4848),o=s(8453);const r={sidebar_position:4,id:"setup-cloud",title:"Cloud-Native Development Setup",description:"Set up Docker, Kubernetes, and cloud deployment"},l="Cloud-Native Development Setup",a={},c=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Containerize Your Application",id:"step-1-containerize-your-application",level:2},{value:"1.1 Create Dockerfile",id:"11-create-dockerfile",level:3},{value:"1.2 Build Docker Image",id:"12-build-docker-image",level:3},{value:"1.3 Test Locally",id:"13-test-locally",level:3},{value:"Step 2: Push to Container Registry",id:"step-2-push-to-container-registry",level:2},{value:"AWS ECR",id:"aws-ecr",level:3},{value:"Google Container Registry",id:"google-container-registry",level:3},{value:"Step 3: Set Up Kubernetes Cluster",id:"step-3-set-up-kubernetes-cluster",level:2},{value:"AWS EKS",id:"aws-eks",level:3},{value:"Google GKE",id:"google-gke",level:3},{value:"Step 4: Deploy to Kubernetes",id:"step-4-deploy-to-kubernetes",level:2},{value:"4.1 Create Deployment YAML",id:"41-create-deployment-yaml",level:3},{value:"4.2 Deploy",id:"42-deploy",level:3},{value:"Step 5: Set Up ROS 2 DDS (DDS-aware networking)",id:"step-5-set-up-ros-2-dds-dds-aware-networking",level:2},{value:"Step 6: Scale and Monitor",id:"step-6-scale-and-monitor",level:2},{value:"Auto-scaling",id:"auto-scaling",level:3},{value:"Monitoring with Prometheus",id:"monitoring-with-prometheus",level:3},{value:"Step 7: CI/CD Pipeline",id:"step-7-cicd-pipeline",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Cost Optimization",id:"cost-optimization",level:2},{value:"Production Checklist",id:"production-checklist",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"cloud-native-development-setup",children:"Cloud-Native Development Setup"})}),"\n",(0,i.jsx)(n.p,{children:"This guide covers containerizing your ROS 2 application and deploying to cloud platforms for distributed development and deployment."}),"\n",(0,i.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        Cloud Platform (AWS/GCP)         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502  Kubernetes Cluster                  \u2502\u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\u2502\n\u2502  \u2502 \u2502  ROS 2 Pods  \u2502  \u2502  Model Pods  \u2502 \u2502\u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker installed"}),"\n",(0,i.jsx)(n.li,{children:"Kubernetes CLI (kubectl)"}),"\n",(0,i.jsx)(n.li,{children:"Cloud account (AWS/GCP/Azure)"}),"\n",(0,i.jsx)(n.li,{children:"Basic Docker/Kubernetes knowledge"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-1-containerize-your-application",children:"Step 1: Containerize Your Application"}),"\n",(0,i.jsx)(n.h3,{id:"11-create-dockerfile",children:"1.1 Create Dockerfile"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"Dockerfile"})," in your ROS 2 workspace:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'# Multi-stage build for optimal size\nFROM osrf/ros:humble-desktop as builder\n\n# Install dependencies\nRUN apt-get update && apt-get install -y \\\n    python3-pip \\\n    python3-colcon-common-extensions \\\n    && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /ros2_ws\nCOPY . src/\n\n# Build\nRUN . /opt/ros/humble/setup.sh && \\\n    colcon build\n\n# Runtime stage - smaller image\nFROM osrf/ros:humble-runtime\n\nCOPY --from=builder /ros2_ws/install /opt/ros2_ws/install\n\nRUN echo "source /opt/ros2_ws/install/setup.bash" >> ~/.bashrc\n\nENTRYPOINT ["/bin/bash"]\nCMD ["-c", "source /opt/ros2_ws/install/setup.bash && ros2 launch your_package your_launch_file.py"]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"12-build-docker-image",children:"1.2 Build Docker Image"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker build -t your-registry/ros2-app:latest .\n\n# Tag for container registry\ndocker tag your-registry/ros2-app:latest your-registry/ros2-app:v1.0.0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"13-test-locally",children:"1.3 Test Locally"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Run container\ndocker run --rm \\\n    --net=host \\\n    -v /tmp/.X11-unix:/tmp/.X11-unix \\\n    -e DISPLAY=$DISPLAY \\\n    your-registry/ros2-app:latest\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-push-to-container-registry",children:"Step 2: Push to Container Registry"}),"\n",(0,i.jsx)(n.h3,{id:"aws-ecr",children:"AWS ECR"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create repository\naws ecr create-repository --repository-name ros2-app\n\n# Login\naws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin <account-id>.dkr.ecr.us-east-1.amazonaws.com\n\n# Push\ndocker push <account-id>.dkr.ecr.us-east-1.amazonaws.com/ros2-app:latest\n"})}),"\n",(0,i.jsx)(n.h3,{id:"google-container-registry",children:"Google Container Registry"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Configure gcloud\ngcloud config set project PROJECT_ID\n\n# Push\ndocker tag your-registry/ros2-app:latest gcr.io/PROJECT_ID/ros2-app:latest\ndocker push gcr.io/PROJECT_ID/ros2-app:latest\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-set-up-kubernetes-cluster",children:"Step 3: Set Up Kubernetes Cluster"}),"\n",(0,i.jsx)(n.h3,{id:"aws-eks",children:"AWS EKS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create cluster\neksctl create cluster --name ros2-cluster --region us-east-1 --nodes 3\n\n# Update kubeconfig\naws eks update-kubeconfig --region us-east-1 --name ros2-cluster\n\n# Verify\nkubectl get nodes\n"})}),"\n",(0,i.jsx)(n.h3,{id:"google-gke",children:"Google GKE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create cluster\ngcloud container clusters create ros2-cluster \\\n    --num-nodes=3 \\\n    --enable-ip-alias \\\n    --zone us-central1-a\n\n# Get credentials\ngcloud container clusters get-credentials ros2-cluster --zone us-central1-a\n\n# Verify\nkubectl get nodes\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-deploy-to-kubernetes",children:"Step 4: Deploy to Kubernetes"}),"\n",(0,i.jsx)(n.h3,{id:"41-create-deployment-yaml",children:"4.1 Create Deployment YAML"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"ros2-deployment.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ros2-app\n  labels:\n    app: ros2-app\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: ros2-app\n  template:\n    metadata:\n      labels:\n        app: ros2-app\n    spec:\n      containers:\n      - name: ros2-app\n        image: gcr.io/PROJECT_ID/ros2-app:latest\n        imagePullPolicy: Always\n        resources:\n          requests:\n            memory: "2Gi"\n            cpu: "1000m"\n          limits:\n            memory: "4Gi"\n            cpu: "2000m"\n        env:\n        - name: ROS_DOMAIN_ID\n          value: "1"\n        - name: ROS_LOCALHOST_ONLY\n          value: "0"\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: ros2-app-service\nspec:\n  selector:\n    app: ros2-app\n  ports:\n  - port: 11311\n    targetPort: 11311\n    protocol: UDP\n  type: LoadBalancer\n'})}),"\n",(0,i.jsx)(n.h3,{id:"42-deploy",children:"4.2 Deploy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Apply deployment\nkubectl apply -f ros2-deployment.yaml\n\n# Check status\nkubectl get pods\nkubectl get svc\n\n# View logs\nkubectl logs -f deployment/ros2-app\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-5-set-up-ros-2-dds-dds-aware-networking",children:"Step 5: Set Up ROS 2 DDS (DDS-aware networking)"}),"\n",(0,i.jsx)(n.p,{children:"For multi-pod communication:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: ros2-config\ndata:\n  RMW_IMPLEMENTATION: rmw_fastrtps_cpp\n  FASTRTPS_DEFAULT_PROFILES_FILE: /etc/ros2/fastrtps.xml\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-6-scale-and-monitor",children:"Step 6: Scale and Monitor"}),"\n",(0,i.jsx)(n.h3,{id:"auto-scaling",children:"Auto-scaling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: ros2-app-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: ros2-app\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n"})}),"\n",(0,i.jsx)(n.h3,{id:"monitoring-with-prometheus",children:"Monitoring with Prometheus"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install Prometheus\nhelm repo add prometheus-community https://prometheus-community.github.io/helm-charts\nhelm install prometheus prometheus-community/prometheus\n\n# Create ServiceMonitor\nkubectl apply -f - <<EOF\napiVersion: monitoring.coreos.com/v1\nkind: ServiceMonitor\nmetadata:\n  name: ros2-monitor\nspec:\n  selector:\n    matchLabels:\n      app: ros2-app\n  endpoints:\n  - port: metrics\n    interval: 30s\nEOF\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-7-cicd-pipeline",children:"Step 7: CI/CD Pipeline"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:".github/workflows/deploy.yml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Deploy to K8s\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v2\n\n    - name: Build Docker image\n      run: docker build -t gcr.io/${{ secrets.GCP_PROJECT }}/ros2-app:${{ github.sha }} .\n\n    - name: Push to GCR\n      run: |\n        echo ${{ secrets.GCP_KEY }} | docker login -u _json_key --password-stdin https://gcr.io\n        docker push gcr.io/${{ secrets.GCP_PROJECT }}/ros2-app:${{ github.sha }}\n\n    - name: Deploy to K8s\n      run: |\n        kubectl set image deployment/ros2-app ros2-app=gcr.io/${{ secrets.GCP_PROJECT }}/ros2-app:${{ github.sha }}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": Pods stuck in Pending"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),": Check resource availability ",(0,i.jsx)(n.code,{children:"kubectl describe node"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": ROS 2 pods can't communicate"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),": Verify ROS_DOMAIN_ID and DDS configuration"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": High latency between pods"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),": Use node affinity to place pods on same node"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cost-optimization",children:"Cost Optimization"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use spot instances (30-70% cheaper)"}),"\n",(0,i.jsx)(n.li,{children:"Set resource requests/limits appropriately"}),"\n",(0,i.jsx)(n.li,{children:"Use horizontal pod autoscaling"}),"\n",(0,i.jsx)(n.li,{children:"Schedule non-critical workloads during off-hours"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"production-checklist",children:"Production Checklist"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Docker image optimized (multi-stage build)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Container image security scanned"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Kubernetes manifests created"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Health checks configured (liveness/readiness probes)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Resource limits set"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitoring and alerting enabled"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Backup and disaster recovery plan"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","CI/CD pipeline automated"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next Steps"}),": Monitor your deployed application and scale based on load"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);