<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module3/chapter4-nav2" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chapter 4: Nav2 Path Planning | ROS 2 Fundamentals for Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://shabi9999.github.io/Physical-AI-Humanoid-Robotics-Textbook/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://shabi9999.github.io/Physical-AI-Humanoid-Robotics-Textbook/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://shabi9999.github.io/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter4-nav2"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 4: Nav2 Path Planning | ROS 2 Fundamentals for Humanoid Robotics"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/Physical-AI-Humanoid-Robotics-Textbook/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://shabi9999.github.io/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter4-nav2"><link data-rh="true" rel="alternate" href="https://shabi9999.github.io/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter4-nav2" hreflang="en"><link data-rh="true" rel="alternate" href="https://shabi9999.github.io/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter4-nav2" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chapter 4: Nav2 Path Planning","item":"https://shabi9999.github.io/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter4-nav2"}]}</script><link rel="stylesheet" href="/Physical-AI-Humanoid-Robotics-Textbook/assets/css/styles.c6500da2.css">
<script src="/Physical-AI-Humanoid-Robotics-Textbook/assets/js/runtime~main.763ff0d4.js" defer="defer"></script>
<script src="/Physical-AI-Humanoid-Robotics-Textbook/assets/js/main.764f8cf5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Physical-AI-Humanoid-Robotics-Textbook/"><div class="navbar__logo"><img src="/Physical-AI-Humanoid-Robotics-Textbook/img/logo.svg" alt="ROS 2 Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Physical-AI-Humanoid-Robotics-Textbook/img/logo.svg" alt="ROS 2 Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ROS 2 Humanoid Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/intro">Course Content</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/shabi9999/Physical-AI-Humanoid-Robotics-Textbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/intro"><span title="Introduction to Physical AI &amp; Humanoid Robotics" class="linkLabel_WmDU">Introduction to Physical AI &amp; Humanoid Robotics</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/setup/setup-intro"><span title="Setup &amp; Getting Started" class="categoryLinkLabel_W154">Setup &amp; Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module1/intro"><span title="Module 1: ROS 2 Fundamentals" class="categoryLinkLabel_W154">Module 1: ROS 2 Fundamentals</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module2/intro"><span title="Module 2: The Digital Twin (Gazebo &amp; Unity)" class="categoryLinkLabel_W154">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/intro"><span title="Module 3: The AI-Robot Brain (NVIDIA Isaac)" class="categoryLinkLabel_W154">Module 3: The AI-Robot Brain (NVIDIA Isaac)</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/intro"><span title="Module 3 Quickstart: Learning Path &amp; Navigation Guide" class="linkLabel_WmDU">Module 3 Quickstart: Learning Path &amp; Navigation Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/ch1-isaac-sim-fundamentals"><span title="Chapter 1: Isaac Sim Fundamentals" class="linkLabel_WmDU">Chapter 1: Isaac Sim Fundamentals</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter2-synthetic-data"><span title="Chapter 2: Synthetic Data Generation" class="linkLabel_WmDU">Chapter 2: Synthetic Data Generation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter3-vslam"><span title="Chapter 3: Isaac ROS VSLAM" class="linkLabel_WmDU">Chapter 3: Isaac ROS VSLAM</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter4-nav2"><span title="Chapter 4: Nav2 Path Planning" class="linkLabel_WmDU">Chapter 4: Nav2 Path Planning</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module4/intro"><span title="Module 4: Vision-Language-Action Pipeline" class="categoryLinkLabel_W154">Module 4: Vision-Language-Action Pipeline</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/glossary"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Physical-AI-Humanoid-Robotics-Textbook/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 3: The AI-Robot Brain (NVIDIA Isaac)</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Chapter 4: Nav2 Path Planning</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 4: Nav2 Path Planning</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>In this chapter, you&#x27;ll learn how humanoid robots plan collision-free paths from their current location to a goal using <strong>Nav2 (Navigation2)</strong>—ROS 2&#x27;s production-ready path planning system.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-youll-learn">What You&#x27;ll Learn<a href="#what-youll-learn" class="hash-link" aria-label="Direct link to What You&#x27;ll Learn" title="Direct link to What You&#x27;ll Learn" translate="no">​</a></h2>
<ul>
<li class="">What path planning is and why it&#x27;s essential for autonomous robots</li>
<li class=""><strong>Costmaps</strong>: How robots represent obstacles and free space as a grid</li>
<li class=""><strong>Global Planning</strong>: Finding optimal paths around obstacles (big picture)</li>
<li class=""><strong>Local Planning</strong>: Avoiding obstacles in real-time (immediate reactions)</li>
<li class=""><strong>Nav2 Pipeline</strong>: How all components work together</li>
<li class="">Real-world scenarios: navigation with unexpected obstacles, dynamic replanning</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-problem-nav2-solves">The Problem Nav2 Solves<a href="#the-problem-nav2-solves" class="hash-link" aria-label="Direct link to The Problem Nav2 Solves" title="Direct link to The Problem Nav2 Solves" translate="no">​</a></h2>
<p>A humanoid robot has explored a room (from Chapter 3: VSLAM) and knows:</p>
<ul>
<li class="">Its current position: (2.0, 3.0)</li>
<li class="">Goal location: (15.0, 8.0)</li>
<li class="">Map with obstacles (walls, furniture)</li>
</ul>
<p><strong>Question</strong>: How does it get from current position to goal safely?</p>
<p><strong>Simple approach</strong> (naive):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Draw a straight line from (2, 3) to (15, 8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tell robot: &quot;Walk forward&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">→ Robot crashes into chair!</span><br></span></code></pre></div></div>
<p><strong>Smart approach</strong> (Nav2):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. Global Planner: Plan a path that avoids all obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Output: (2,3) → (5,3) → (5,10) → (15,10) → (15,8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Local Planner: Execute path while avoiding dynamic obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   If person walks in front: Replan locally!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Controller: Send motor commands to follow the path</span><br></span></code></pre></div></div>
<p>This is what Nav2 does!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="costmaps-the-robots-internal-representation">Costmaps: The Robot&#x27;s Internal Representation<a href="#costmaps-the-robots-internal-representation" class="hash-link" aria-label="Direct link to Costmaps: The Robot&#x27;s Internal Representation" title="Direct link to Costmaps: The Robot&#x27;s Internal Representation" translate="no">​</a></h2>
<p><strong>Costmap</strong> is a 2D grid where each cell represents whether it&#x27;s:</p>
<ul>
<li class=""><strong>Free</strong> (robot can walk here)</li>
<li class=""><strong>Obstacle</strong> (wall, furniture, person)</li>
<li class=""><strong>Unknown</strong> (not yet explored)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="simple-example">Simple Example<a href="#simple-example" class="hash-link" aria-label="Direct link to Simple Example" title="Direct link to Simple Example" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Costmap (top-down view of a room):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 = free space (robot can walk)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X = obstacle (wall, furniture)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? = unknown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0 1 2 3 4 5 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  0 X X X X X X X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1 X 0 0 0 0 0 X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2 X 0 0 0 0 0 X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3 X 0 0 0 X 0 X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  4 X 0 0 0 X 0 X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  5 X 0 X 0 0 0 X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  6 X X X X X X X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Robot starts at (1, 1) marked as R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Goal is at (5, 1) marked as G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">R 0 0 0 0 G</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-a-costmap">Creating a Costmap<a href="#creating-a-costmap" class="hash-link" aria-label="Direct link to Creating a Costmap" title="Direct link to Creating a Costmap" translate="no">​</a></h3>
<p>The costmap comes from <strong>Chapter 3: VSLAM</strong>:</p>
<ul>
<li class="">VSLAM builds a 3D map with obstacles</li>
<li class="">Convert to 2D top-down view</li>
<li class="">Mark occupied cells as obstacles</li>
<li class="">Mark free cells as walkable</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">3D VSLAM Map:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[point cloud with walls, chairs, obstacles]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2D Projection (bird&#x27;s eye view):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[walls become lines, obstacles become occupied cells]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Costmap:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0 0 0 X 0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0 X X X 0]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="inflation-radius">Inflation Radius<a href="#inflation-radius" class="hash-link" aria-label="Direct link to Inflation Radius" title="Direct link to Inflation Radius" translate="no">​</a></h3>
<p>To be safe, robots expand obstacles:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Original Obstacle:    Inflated Obstacle:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0 X 0]              [X X X]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[X X X]              [X X X]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0 X 0]              [X X X]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Why? Robot has physical width. Expanding the obstacle ensures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the robot doesn&#x27;t graze obstacles with its body.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="global-planning-finding-an-optimal-path">Global Planning: Finding an Optimal Path<a href="#global-planning-finding-an-optimal-path" class="hash-link" aria-label="Direct link to Global Planning: Finding an Optimal Path" title="Direct link to Global Planning: Finding an Optimal Path" translate="no">​</a></h2>
<p><strong>Global planner</strong> asks: &quot;What&#x27;s the best path from start to goal considering the map?&quot;</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="path-planning-algorithms">Path Planning Algorithms<a href="#path-planning-algorithms" class="hash-link" aria-label="Direct link to Path Planning Algorithms" title="Direct link to Path Planning Algorithms" translate="no">​</a></h3>
<p>Several algorithms exist. Here are the main ones:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="algorithm-1-dijkstras-algorithm">Algorithm 1: Dijkstra&#x27;s Algorithm<a href="#algorithm-1-dijkstras-algorithm" class="hash-link" aria-label="Direct link to Algorithm 1: Dijkstra&#x27;s Algorithm" title="Direct link to Algorithm 1: Dijkstra&#x27;s Algorithm" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Start at (2, 3), Goal at (15, 8), Costmap with obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Algorithm:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Mark start as &quot;visited&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Expand to all neighbors, record distances:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (1,3): distance 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (3,3): distance 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (2,2): distance 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (2,4): distance 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Pick the neighbor with smallest distance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Expand from that neighbor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. Repeat until you reach the goal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Result: Shortest path found!</span><br></span></code></pre></div></div>
<p><strong>Advantages</strong>: Guaranteed shortest path
<strong>Disadvantages</strong>: Slow for large maps (explores many cells)</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="algorithm-2-a-a-star">Algorithm 2: A* (A-Star)<a href="#algorithm-2-a-a-star" class="hash-link" aria-label="Direct link to Algorithm 2: A* (A-Star)" title="Direct link to Algorithm 2: A* (A-Star)" translate="no">​</a></h4>
<p>A* is like Dijkstra but smarter—it uses a <strong>heuristic</strong>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Dijkstra explores all directions equally.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A* thinks: &quot;Goal is to the northeast. Let me prioritize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exploring cells that are closer to the goal.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Heuristic: distance(current, goal) as the crow flies</span><br></span></code></pre></div></div>
<p><strong>Result</strong>: Finds the same shortest path as Dijkstra but <strong>10-100x faster</strong> by avoiding unnecessary exploration.</p>
<p><strong>Advantage</strong>: Much faster than Dijkstra
<strong>Disadvantage</strong>: Requires heuristic (but distance-to-goal is simple and effective)</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="algorithm-3-rapidly-exploring-random-tree-rrt">Algorithm 3: Rapidly-exploring Random Tree (RRT)<a href="#algorithm-3-rapidly-exploring-random-tree-rrt" class="hash-link" aria-label="Direct link to Algorithm 3: Rapidly-exploring Random Tree (RRT)" title="Direct link to Algorithm 3: Rapidly-exploring Random Tree (RRT)" translate="no">​</a></h4>
<p>RRT uses randomization:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Start at (2, 3), Goal at (15, 8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Algorithm:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Place a node at start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Pick a random point in the map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Find the closest node to that random point</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Grow a branch toward the random point</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. Repeat hundreds of times</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6. When a node gets close to the goal, connect to it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Result: A tree of paths (not necessarily optimal, but</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">found quickly)</span><br></span></code></pre></div></div>
<p><strong>Advantage</strong>: Works well in complex environments
<strong>Disadvantage</strong>: Path might not be optimal</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="algorithm-comparison">Algorithm Comparison<a href="#algorithm-comparison" class="hash-link" aria-label="Direct link to Algorithm Comparison" title="Direct link to Algorithm Comparison" translate="no">​</a></h3>
<table><thead><tr><th>Algorithm</th><th>Speed</th><th>Optimality</th><th>Best For</th></tr></thead><tbody><tr><td><strong>Dijkstra</strong></td><td>Slow</td><td>Guaranteed shortest path</td><td>Small maps, when optimality matters</td></tr><tr><td><strong>A</strong>*</td><td>Fast</td><td>Guaranteed shortest path</td><td>Most real-world applications (Nav2 default)</td></tr><tr><td><strong>RRT</strong></td><td>Very fast</td><td>Good (not optimal)</td><td>Complex, high-dimensional spaces</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="nav2s-global-planner">Nav2&#x27;s Global Planner<a href="#nav2s-global-planner" class="hash-link" aria-label="Direct link to Nav2&#x27;s Global Planner" title="Direct link to Nav2&#x27;s Global Planner" translate="no">​</a></h3>
<p>Nav2 typically uses <strong>A</strong>* because it balances:</p>
<ul>
<li class=""><strong>Speed</strong>: Fast enough for real-time use</li>
<li class=""><strong>Optimality</strong>: Finds short paths</li>
<li class=""><strong>Simplicity</strong>: Easy to understand and debug</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="local-planning-reacting-to-the-unexpected">Local Planning: Reacting to the Unexpected<a href="#local-planning-reacting-to-the-unexpected" class="hash-link" aria-label="Direct link to Local Planning: Reacting to the Unexpected" title="Direct link to Local Planning: Reacting to the Unexpected" translate="no">​</a></h2>
<p><strong>Problem with global planning alone</strong>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Global Plan: (2,3) → (5,3) → (5,10) → (15,10) → (15,8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Robot executes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Move to (5, 3): ✓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Move to (5, 10): But a PERSON is standing in the way!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Global plan assumes static world, but world is dynamic!</span><br></span></code></pre></div></div>
<p><strong>Local Planner</strong> solves this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Local Planner monitors:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Robot&#x27;s current position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Costmap around robot (±2 meters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Obstacles in the way</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If obstacle appears:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1. Slow down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2. Calculate safe micro-paths around obstacle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3. If possible: steer around obstacle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  4. If blocked: Signal to global planner to replan</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="dynamic-window-approach-dwa">Dynamic Window Approach (DWA)<a href="#dynamic-window-approach-dwa" class="hash-link" aria-label="Direct link to Dynamic Window Approach (DWA)" title="Direct link to Dynamic Window Approach (DWA)" translate="no">​</a></h3>
<p>Nav2&#x27;s default local planner:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Current Robot State:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Position: (5, 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Velocity: moving forward 0.5 m/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Turning rate: 0 rad/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DWA Algorithm:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Predict: &quot;If I accelerate, what positions will I reach?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Position in 0.5 sec: (5.25, 3.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Position in 1.0 sec: (5.50, 3.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Position in 1.5 sec: (5.75, 3.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Simulate: &quot;Will I collide with obstacles?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Check predicted positions against costmap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (5.25, 3.0): ✓ free</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (5.50, 3.0): ✓ free</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (5.75, 3.0): ✗ obstacle ahead!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Adjust: &quot;What velocity avoids collision?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Try turning left slightly: (5.22, 3.08) ✓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Send: &quot;Steer left, reduce forward speed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Repeat every 50ms</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-complete-nav2-pipeline">The Complete Nav2 Pipeline<a href="#the-complete-nav2-pipeline" class="hash-link" aria-label="Direct link to The Complete Nav2 Pipeline" title="Direct link to The Complete Nav2 Pipeline" translate="no">​</a></h2>
<p>Here&#x27;s how everything fits together:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[VSLAM Input]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Robot pose (x, y, theta)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map with obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Costmap Node]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Convert map to grid costmap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Add inflation radius</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Update dynamic obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Global Planner]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Input: start, goal, costmap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Output: planned path (sequence of waypoints)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Algorithm: A*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Local Planner (DWA)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Input: current state, goal, costmap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Output: velocity commands (linear + angular)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Controller]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Convert velocity to motor commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Send to humanoid robot&#x27;s actuators</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Robot Motion]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Robot follows path while avoiding obstacles</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="real-world-example-robot-navigating-an-office">Real-World Example: Robot Navigating an Office<a href="#real-world-example-robot-navigating-an-office" class="hash-link" aria-label="Direct link to Real-World Example: Robot Navigating an Office" title="Direct link to Real-World Example: Robot Navigating an Office" translate="no">​</a></h2>
<p><strong>Scenario</strong>: Humanoid robot must go from office A to office C (passing through hallway).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="initial-plan">Initial Plan<a href="#initial-plan" class="hash-link" aria-label="Direct link to Initial Plan" title="Direct link to Initial Plan" translate="no">​</a></h3>
<p>Global planner creates path:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Office A → Hallway → Office C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Visual:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[A] ——→ [Hallway] ——→ [C]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start         midpoint      Goal</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="execution-phase-1-hallway-clear">Execution Phase 1: Hallway Clear<a href="#execution-phase-1-hallway-clear" class="hash-link" aria-label="Direct link to Execution Phase 1: Hallway Clear" title="Direct link to Execution Phase 1: Hallway Clear" translate="no">​</a></h3>
<p>Robot moves forward along planned path. Local planner checks obstacles every 50ms—all clear.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Robot position: Office A entrance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Costmap: No obstacles ahead</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Local planner: &quot;Safe to move forward&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action: Walk forward at 0.5 m/s</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="execution-phase-2-dynamic-obstacle">Execution Phase 2: Dynamic Obstacle!<a href="#execution-phase-2-dynamic-obstacle" class="hash-link" aria-label="Direct link to Execution Phase 2: Dynamic Obstacle!" title="Direct link to Execution Phase 2: Dynamic Obstacle!" translate="no">​</a></h3>
<p>Person walks into hallway.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Robot position: Middle of hallway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Costmap updated: Obstacle detected!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Local planner: &quot;Obstacle 1 meter ahead&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action 1: Slow to 0.2 m/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action 2: Steer left to navigate around person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action 3: Continue to goal</span><br></span></code></pre></div></div>
<p>If local planner can&#x27;t navigate around (blocked), it signals global planner:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Path blocked. Replan!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Global Planner: Recalculates using updated costmap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If alternate path exists: Replan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If no path exists: Stop and wait</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="execution-phase-3-goal-reached">Execution Phase 3: Goal Reached<a href="#execution-phase-3-goal-reached" class="hash-link" aria-label="Direct link to Execution Phase 3: Goal Reached" title="Direct link to Execution Phase 3: Goal Reached" translate="no">​</a></h3>
<p>Robot reaches office C.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Robot position: Within 0.3m of goal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Local planner: &quot;Goal reached&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action: Stop motors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: Success!</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="real-world-challenges">Real-World Challenges<a href="#real-world-challenges" class="hash-link" aria-label="Direct link to Real-World Challenges" title="Direct link to Real-World Challenges" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-1-uncertain-costmaps">Challenge 1: Uncertain Costmaps<a href="#challenge-1-uncertain-costmaps" class="hash-link" aria-label="Direct link to Challenge 1: Uncertain Costmaps" title="Direct link to Challenge 1: Uncertain Costmaps" translate="no">​</a></h3>
<p>VSLAM costmap isn&#x27;t perfect:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Reality: Wall at (10, 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VSLAM: Wall detected at (10.1, 5.2)  (10cm error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Global planner might plan a path that&#x27;s too close to wall.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Local planner detects actual wall and brakes!</span><br></span></code></pre></div></div>
<p><strong>Solution</strong>: Add safety margin (inflation radius larger than expected error).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-2-humans-are-unpredictable">Challenge 2: Humans are Unpredictable<a href="#challenge-2-humans-are-unpredictable" class="hash-link" aria-label="Direct link to Challenge 2: Humans are Unpredictable" title="Direct link to Challenge 2: Humans are Unpredictable" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Local planner assumes: If person ahead, person walks away</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reality: Person blocks path and doesn&#x27;t move</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Robot behavior: Stops, waits, eventually signals &quot;blocked&quot;</span><br></span></code></pre></div></div>
<p><strong>Solution</strong>: Combine Nav2 with social navigation (adjust paths to give humans space).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-3-uneven-terrain">Challenge 3: Uneven Terrain<a href="#challenge-3-uneven-terrain" class="hash-link" aria-label="Direct link to Challenge 3: Uneven Terrain" title="Direct link to Challenge 3: Uneven Terrain" translate="no">​</a></h3>
<p>Nav2 assumes 2D grid costmap (flat ground).</p>
<p>For humanoid robots on stairs:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Standard Nav2: Can&#x27;t handle 3D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Solution: Use 3D planning (more complex, slower)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Or: Limit navigation to flat terrain</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="comparison-global-vs-local-planning">Comparison: Global vs. Local Planning<a href="#comparison-global-vs-local-planning" class="hash-link" aria-label="Direct link to Comparison: Global vs. Local Planning" title="Direct link to Comparison: Global vs. Local Planning" translate="no">​</a></h2>
<table><thead><tr><th>Aspect</th><th>Global Plan</th><th>Local Plan</th></tr></thead><tbody><tr><td><strong>Time Horizon</strong></td><td>Full path (seconds to minutes)</td><td>Next few seconds</td></tr><tr><td><strong>Information</strong></td><td>Full map known</td><td>Immediate environment (±2m)</td></tr><tr><td><strong>Computation</strong></td><td>Done once (A* on full map)</td><td>Continuous (DWA every 50ms)</td></tr><tr><td><strong>Adaptability</strong></td><td>Static (only replans when blocked)</td><td>Dynamic (reacts every 50ms)</td></tr><tr><td><strong>Purpose</strong></td><td>Optimal route</td><td>Safe execution</td></tr></tbody></table>
<p><strong>Together</strong>: Global plan = destination, Local plan = safe journey.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-happens-next">What Happens Next<a href="#what-happens-next" class="hash-link" aria-label="Direct link to What Happens Next" title="Direct link to What Happens Next" translate="no">​</a></h2>
<p>You&#x27;ve now learned all the components for a complete perception-and-navigation system:</p>
<ol>
<li class=""><strong>Chapter 1 (Isaac Sim)</strong>: Training in simulation</li>
<li class=""><strong>Chapter 2 (Synthetic Data)</strong>: Generating training data</li>
<li class=""><strong>Chapter 3 (VSLAM)</strong>: Perceiving and localizing</li>
<li class=""><strong>Chapter 4 (Nav2)</strong>: Planning and navigating</li>
</ol>
<p>The complete cycle: <strong>Perceive → Localize → Plan → Execute</strong></p>
<p>In later modules (not yet published), you&#x27;ll learn:</p>
<ul>
<li class=""><strong>Module 4</strong>: How voice commands trigger this entire pipeline</li>
<li class=""><strong>Module 5</strong>: How to implement complete systems using ROS 2</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-takeaways">Key Takeaways<a href="#key-takeaways" class="hash-link" aria-label="Direct link to Key Takeaways" title="Direct link to Key Takeaways" translate="no">​</a></h2>
<p>✓ <strong>Costmaps</strong> represent obstacles as a 2D grid (free, occupied, unknown)
✓ <em><em>Global Planning (A</em>)</em>* finds optimal paths considering the complete map
✓ <strong>Local Planning (DWA)</strong> reacts to dynamic obstacles and ensures safe execution
✓ <strong>Replanning</strong> automatically recalculates when the world changes
✓ <strong>Together, global + local planning</strong> enable truly autonomous humanoid navigation
✓ <strong>Nav2 is production-ready</strong>: Used in hundreds of robots in the real world</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="complete-system-understanding">Complete System Understanding<a href="#complete-system-understanding" class="hash-link" aria-label="Direct link to Complete System Understanding" title="Direct link to Complete System Understanding" translate="no">​</a></h2>
<p>You now understand the entire perception-localization-planning pipeline:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">From VSLAM (Chapter 3):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;I am at (5, 5) facing north, and here&#x27;s the map&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To Nav2 (Chapter 4):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;I will navigate to (15, 15) safely&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Result:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Humanoid robot autonomously explores,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  localizes itself,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plans paths,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  avoids obstacles,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  reaches goals</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h2>
<p>You&#x27;ve completed <strong>Module 3: The AI-Robot Brain</strong>! You now understand:</p>
<ul>
<li class="">How to train perception in simulation</li>
<li class="">How to generate realistic training data</li>
<li class="">How robots localize themselves with cameras</li>
<li class="">How robots plan and execute safe navigation</li>
</ul>
<p><strong>Ready for more?</strong> Upcoming modules will have you:</p>
<ul>
<li class="">Build complete systems using ROS 2</li>
<li class="">Implement VSLAM and Nav2 from scratch</li>
<li class="">Deploy on real humanoid robots</li>
<li class="">Integrate with voice commands and AI agents</li>
</ul>
<hr>
<p><strong>Learning Outcome</strong>: You now understand how robots independently perceive their environment, localize themselves, plan collision-free paths, and execute navigation in the real world.</p>
<p><strong>Congratulations on completing Module 3!</strong> 🎉</p>
<p>You&#x27;ve learned the perception and navigation systems that enable humanoid robots to autonomously explore and interact with the world. These technologies are deployed in thousands of robots worldwide.</p>
<p>Next: Higher-level modules will teach you to orchestrate these systems with AI and voice commands!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/shabi9999/Physical-AI-Humanoid-Robotics-Textbook/tree/main/my-website/docs/module3/chapter4-nav2.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module3/chapter3-vslam"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chapter 3: Isaac ROS VSLAM</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Physical-AI-Humanoid-Robotics-Textbook/docs/module4/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Module 4: Vision-Language-Action Pipeline</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#what-youll-learn" class="table-of-contents__link toc-highlight">What You&#39;ll Learn</a></li><li><a href="#the-problem-nav2-solves" class="table-of-contents__link toc-highlight">The Problem Nav2 Solves</a></li><li><a href="#costmaps-the-robots-internal-representation" class="table-of-contents__link toc-highlight">Costmaps: The Robot&#39;s Internal Representation</a><ul><li><a href="#simple-example" class="table-of-contents__link toc-highlight">Simple Example</a></li><li><a href="#creating-a-costmap" class="table-of-contents__link toc-highlight">Creating a Costmap</a></li><li><a href="#inflation-radius" class="table-of-contents__link toc-highlight">Inflation Radius</a></li></ul></li><li><a href="#global-planning-finding-an-optimal-path" class="table-of-contents__link toc-highlight">Global Planning: Finding an Optimal Path</a><ul><li><a href="#path-planning-algorithms" class="table-of-contents__link toc-highlight">Path Planning Algorithms</a></li><li><a href="#algorithm-comparison" class="table-of-contents__link toc-highlight">Algorithm Comparison</a></li><li><a href="#nav2s-global-planner" class="table-of-contents__link toc-highlight">Nav2&#39;s Global Planner</a></li></ul></li><li><a href="#local-planning-reacting-to-the-unexpected" class="table-of-contents__link toc-highlight">Local Planning: Reacting to the Unexpected</a><ul><li><a href="#dynamic-window-approach-dwa" class="table-of-contents__link toc-highlight">Dynamic Window Approach (DWA)</a></li></ul></li><li><a href="#the-complete-nav2-pipeline" class="table-of-contents__link toc-highlight">The Complete Nav2 Pipeline</a></li><li><a href="#real-world-example-robot-navigating-an-office" class="table-of-contents__link toc-highlight">Real-World Example: Robot Navigating an Office</a><ul><li><a href="#initial-plan" class="table-of-contents__link toc-highlight">Initial Plan</a></li><li><a href="#execution-phase-1-hallway-clear" class="table-of-contents__link toc-highlight">Execution Phase 1: Hallway Clear</a></li><li><a href="#execution-phase-2-dynamic-obstacle" class="table-of-contents__link toc-highlight">Execution Phase 2: Dynamic Obstacle!</a></li><li><a href="#execution-phase-3-goal-reached" class="table-of-contents__link toc-highlight">Execution Phase 3: Goal Reached</a></li></ul></li><li><a href="#real-world-challenges" class="table-of-contents__link toc-highlight">Real-World Challenges</a><ul><li><a href="#challenge-1-uncertain-costmaps" class="table-of-contents__link toc-highlight">Challenge 1: Uncertain Costmaps</a></li><li><a href="#challenge-2-humans-are-unpredictable" class="table-of-contents__link toc-highlight">Challenge 2: Humans are Unpredictable</a></li><li><a href="#challenge-3-uneven-terrain" class="table-of-contents__link toc-highlight">Challenge 3: Uneven Terrain</a></li></ul></li><li><a href="#comparison-global-vs-local-planning" class="table-of-contents__link toc-highlight">Comparison: Global vs. Local Planning</a></li><li><a href="#what-happens-next" class="table-of-contents__link toc-highlight">What Happens Next</a></li><li><a href="#key-takeaways" class="table-of-contents__link toc-highlight">Key Takeaways</a></li><li><a href="#complete-system-understanding" class="table-of-contents__link toc-highlight">Complete System Understanding</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learning Path</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Physical-AI-Humanoid-Robotics-Textbook/">Module 1: ROS 2 Fundamentals</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.ros.org/en/humble/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ROS 2 Documentation<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/shabi9999/Physical-AI-Humanoid-Robotics-Textbook" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repository<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with Docusaurus. Educational content for humanoid robotics learning.</div></div></div></footer></div>
</body>
</html>